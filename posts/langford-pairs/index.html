<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://gagan405.github.io name=base><title>
            
                Langford Pairs
            
        </title><meta content="Langford Pairs" property=og:title><link href=https://gagan405.github.io/icon/favicon.png rel=icon type=image/png><link href=https://gagan405.github.io/fonts.css rel=stylesheet><script defer src=https://gagan405.github.io/js/codeblock.js></script><script defer src=https://gagan405.github.io/js/toc.js></script><script defer src=https://gagan405.github.io/js/note.js></script><script>MathJax = {
                    tex: {
                        inlineMath: [
                            ['$', '$'],
                            ['\\(', '\\)']
                        ]
                    }
                };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="
    gb mishra
" href=https://gagan405.github.io/atom.xml rel=alternate type=application/atom+xml><link title="
    gb mishra
" href=https://gagan405.github.io/rss.xml rel=alternate type=application/rss+xml><link href=https://gagan405.github.io/theme/light.css rel=stylesheet><link href=https://gagan405.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://gagan405.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://gagan405.github.io/main.css media=screen rel=stylesheet><script src="https://gagan405.github.io/search_index.en.js?h=ed7db15dd4fde6e35f9a" defer></script><script src="https://gagan405.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=left-content></div><div class=content><nav><div class=left-nav><a href=https://gagan405.github.io>gb mishra</a><div class=socials><a class=social href=https://x.com/__gbm rel=me> <img alt=twitter src=https://gagan405.github.io/icons/social/twitter.svg> </a><a class=social href=https://github.com/gagan405/ rel=me> <img alt=github src=https://gagan405.github.io/icons/social/github.svg> </a><a class=social href=/atom.xml rel=me> <img alt=rss src=https://gagan405.github.io/icons/social/rss.svg> </a></div></div><div class=right-nav><a href=https://gagan405.github.io/posts style=margin-right:.5em>/posts</a><a href=https://gagan405.github.io/tags style=margin-right:.5em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://gagan405.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://gagan405.github.io/icons/sun.svg> <img alt=Dark id=moon-icon src=https://gagan405.github.io/icons/moon.svg style=filter:invert()> <img alt=Auto id=auto-icon src=https://gagan405.github.io/icons/auto.svg style=filter:invert()> </a><script>updateItemToggleTheme()</script></div></nav><div data-selector="main article p" class=visible-element-observer-root><main><article><div class=title><div class=page-header>Langford Pairs</div><div class=meta>Posted on <time>2017-01-10</time><span class=tags-label>::</span><span class=tags> <a class=post-tag href=https://gagan405.github.io/tags/java/>java</a> <a class=post-tag href=https://gagan405.github.io/tags/algorithms/>algorithms</a> <a class=post-tag href=https://gagan405.github.io/tags/maths/>maths</a> </span></div></div><section class=body><p>Recently I was asked to write some code to generate a <a href=https://en.wikipedia.org/wiki/Langford_pairing>Langford Pair</a>. I had never heard of those before.<p>A langford sequence is a sequence of numbers where every number appears twice and equal numbers have a difference of their positions equal to their value.<p>For example for n = 4 : <code>4 1 3 1 2 4 3 2</code><p>Clearly, the sequence is of length 2n as every number appears twice.<p>Intuitively we fix the highest number at the first position and at the next allowed position : <code>4 _ _ _ _ 4 _ _</code><p>Then we go to the next number, that is 3 and try to place it at the next possible position : <code>4 _ 3 _ _ 4 3 _</code><p>Now we try to place 2 : <code>4 2 3 _ 2 4 3 _</code><p>Oops. There is no valid position left for 1 now. So we backtrack, and remove the last number inserted and re-insert that somewhere else. If no re-insertable position found for that number, we backtrack again to the next upper level and try re-position that number and so on.<p>So we backtrack, and remove 2 from its inserted position and check if we have any available position for 2. Turns out we have : <code>4 _ 3 _ 2 4 3 2</code><p>Now, we found one available position for the 1s in the sequence, and we get the final Langford sequence after placing the 1s there : <code>4 1 3 1 2 4 3 2</code><p>Interesting to see that there are multiple Langford sequences for the same value of n. For example, if we reverse the previous Langford sequence, it will still be a Langford sequence. So for n = 4, we have 2 such sequences available.<p>So, how do we generate such a sequence ?<p>As I wrote above, it can be easily done using recursion. Define a function that takes an array, and the next number to insert. Now, if it finds a place to insert the number, it inserts them, and recursively calls itself to insert n-1 . If it can’t insert the number it returns, and the calling function will then try re-positioning n and do the recursion again.<p>Turns out it is an expensive process, as we cannot use tail-recursion here. (For that matter in any backtracking algorithm).<p>But, will we always get a Langford sequence for any given number ? Here is a mathematical proof that it can only be feasible when <code>n MOD 4 = 0</code> or <code>n MOD 4 = −1</code><p>That saves us from doing useless recursions and overflowing the stack when we already know no such sequence exists.<p>We can also do it iteratively without recursion. But then, since we need to backtrack when no position is available for a number, we have to keep track of the numbers inserted using a stack.<p>The iteration can also be done in 2 different ways. Either we iterate on the positions, and see what number can be inserted at this position, or we iterate over the numbers, where we answer ‘at what position this number can be inserted’ in every loop. Both will result in different sequences.<p>We can generate all Langford Sequences by back tracking and re-positioning the numbers to the next available position.<p><a href=https://github.com/gagan405/Algorithms/blob/master/algorithms/src/in/cafeaffe/algo/LangfordPairs.java>Here</a> is the code that I wrote in some of my spare time, which implements all these 3 approaches.<p>References :<ol><li>http://datagenetics.com/blog/october32014/index.html<li>http://dialectrix.com/langford/langford-algorithm.html</ol></section></article></main></div></div><div class=right-content></div>